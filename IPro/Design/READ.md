php高级程序设计 模式 框架与测试
一、单例模式(Singleton) 至少拥有三种 公共元素。
    1、必须拥有一个构造函数，标记为私有  __construct()
    2、拥有一个保存类的 实例的 静态成员变量
    3、拥有一个访问 这个实例的 公共的  静态方法

    单例模式属于创建型的应用模式，可以确保某一个类只有一个实例。这在获取数据库，缓存服务器的连接句柄，以及获取配置信息方面非常方便。
    （1）、应用程序与数据库交互    一个应用中会存在大量的数据库操作，比如过数据库句柄来连接数据库这一行为，使用单例模式可以避免大量的new操作，因为每一次new操作都会消耗内存资源和系统资源。
    （2）、控制配置信息   如果系统中需要有一个类来全局控制某些配置信息, 那么使用单例模式可以很方便的实现.

     PHP单例模式只是针对单次页面级请求时，出现多个应用场景并需要共享同一对象资源时是非常有意义的。单例类只能被其自身实例化
        You should be wary when using the singleton pattern, as by its very nature it introduces global state into your application, reducing testability. In most cases, dependency injection can (and should) be used in place of a singleton class. Using dependency injection means that we do not introduce unnecessary coupling into the design of our application, as the object using the shared or global resource requires no knowledge of a concretely defined class.

二、工厂模式(Factory)  interface  implements   工厂类  主要用来  创建对象。
    工厂方法类的核心是一个抽象工厂类，而简单工厂模式把核心放在一个具体类上。
    工厂模式 是一种类，它具有为您创建对象的某些方法。您可以使用工厂类创建对象，而不直接使用 new。这样，如果您想要更改所创建的对象类型，只需更改该工厂即可。使用该工厂的所有代码会自动更改。

    简单工厂模式:用来生产同一等级结构中的任意产品。对与增加新的产品，无能为力
    工厂模式 ：用来生产同一等级结构中的固定产品。（支持增加任意产品）
    抽象工厂 ：用来生产不同产品族的全部产品。（对于增加新的产品，无能为力；支持增加产品族）
    以上三种工厂 方法在等级结构和产品族这两个方向上的支持程度不同。所以要根据情况考虑应该使用哪种方法
    适用范围：
    简单工厂模式：    工厂类负责创建的对象较少，客户只知道传入工厂类的参数，对于如何创建对象不关心。
    工厂方法模式：    当一个类不知道它所必须创建对象的类或一个类希望由子类来指定它所创建的对象时，当类将创建对象的职责委托给多个帮助子类中得某一个，并且你希望将哪一个帮助子类是代理者这一信息局部化的时候，可以使用工厂方法模式。
    抽象工厂模式：    一个系统不应当依赖于产品类实例何如被创建，组合和表达的细节，这对于所有形态的工厂模式都是重要的。这个系统有多于一个的产品族，而系统只消费其 中某一产品族。同属于同一个产品族的产品是在一起使用的，这一约束必须在系统的设计中体现出来。系统提供一个产品类的库，所有的产品以同样的接口出现，从 而使客户端不依赖于实现。
    无论是简单工厂模式、工厂模式还是抽象工厂模式，它们本质上都是将不变的部分提取出来，将可变的部分留作接口，以达到最大程度上的复用。究竟用哪种设计模式更适合，这要根据具体的业务需求来决定。
